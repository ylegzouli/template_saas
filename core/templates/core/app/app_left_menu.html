<style>
    .active {
        border-left: 4px solid blue;
        /* Example: Change 'blue' to your desired border color */
        background-color: rgba(59, 130, 246, 0.1);
        /* Optional: Adds a slight background color */
    }
</style>


<div class="relative overflow-auto my-4 ml-4 w-60 shadow-lg bg-white rounded-lg dark:bg-gray-700 flex flex-col justify-between p-4"
    style="height: calc(100vh - 2rem);">
    <div>
        <div class="flex items-center justify-center pt-6 pb-8"> <!-- Added bottom padding here -->
            <a href="/" aria-label="Company" title="Company" class="inline-flex items-center">
                <svg class="w-8 text-deep-purple-accent-400" viewBox="0 0 24 24" stroke-linejoin="round"
                    stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" stroke="currentColor" fill="none">
                    <rect x="3" y="1" width="7" height="12"></rect>
                    <rect x="3" y="17" width="7" height="6"></rect>
                    <rect x="14" y="1" width="7" height="6"></rect>
                    <rect x="14" y="11" width="7" height="12"></rect>
                </svg>
                <span class="ml-2 text-xl font-bold tracking-wide text-gray-800 uppercase">Company</span>
            </a>
        </div>

        <nav>

            <div role="button"
                class="menu-item-link flex items-center w-full p-3 leading-tight transition-all rounded-lg outline-none text-start hover:bg-blue-gray-50 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900"
                hx-get="/app/main" hx-push-url="true" hx-target="#content-div" hx-swap="innerHTML"
                hx-indicator="#content-loader">
                <div class="grid mr-4 place-items-center">
                    <!-- Dashboard Icon -->
                    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0v3h1v15h22v-15h1v-3h-24zm21 16h-18v-13h18v13zm-11.636 4l-2.736 4h-2.628l2.732-4h2.632zm10.636 4h-2.627l-2.736-4h2.632l2.731 4zm-11-10h-4v-4h4v4zm10 0h-4v-6h4v6zm-5 0h-4v-9h4v9z"/></svg>
                </div>
                Dashboard 1
            </div>

            <div role="button"
                class="menu-item-link flex items-center w-full p-3 leading-tight transition-all rounded-lg outline-none text-start hover:bg-blue-gray-50 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900"
                hx-get="/app/main/2" hx-push-url="true" hx-target="#content-div" hx-swap="innerHTML"
                hx-indicator="#content-loader">
                <div class="grid mr-4 place-items-center">
                    <!-- Dashboard Icon -->
                    <!-- <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M16.488 20l3.414 4h-2.627l-3.42-4h2.633zm1.512-14h-4v1h4v-1zm-7 18h2v-4h-2v4zm-6.918 0h2.628l3.42-4h-2.633l-3.415 4zm13.918-16h-4v1h4v-1zm0 2h-4v1h4v-1zm-8.5 3c1.762 0 3.205-1.306 3.45-3h-3.95v-3.95c-1.694.245-3 1.688-3 3.45 0 1.933 1.567 3.5 3.5 3.5zm.5-6.95v2.95h2.95c-.221-1.529-1.421-2.729-2.95-2.95zm8 5.95h-4v1h4v-1zm5-9h-1v15h-20v-15h-1v-3h22v3zm-3 0h-16v13h16v-13z"/></svg> -->
                    <svg class="w-6 h-6"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 19h-6v-11h6v11zm8-18h-6v18h6v-18zm8 11h-6v7h6v-7zm1 9h-24v2h24v-2z"/></svg>
                </div>
                Dashboard 2
            </div>

        </nav>

    </div>


    <div>
        <div role="button"
            class="menu-item-link flex items-center w-full p-2 leading-tight transition-all rounded-lg outline-none text-start hover:bg-blue-gray-50 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900"
            hx-get="/app/settings" hx-push-url="true" hx-target="#content-div" hx-swap="innerHTML"
            hx-indicator="#content-loader">

        <div class="flex items-center gap-4">
            <img src="https://docs.material-tailwind.com/img/face-2.jpg" alt="avatar"
              class="inline-block relative object-cover object-center rounded-full w-10 h-10" />
            <div>
              <h6 class="block font-sans text-base antialiased font-semibold leading-relaxed tracking-normal text-inherit">
                {{ user.username }}
              </h6>
              <p class="block font-sans text-sm antialiased font-normal leading-normal text-gray-700">
                {{ user.email }}
              </p>
            </div>
          </div>
          </div>


        <a href="/logout"
            class="flex items-center w-full p-3  pl-4 leading-tight transition-all rounded-lg outline-none text-start hover:bg-blue-gray-50 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900">
            <div class="grid mr-4 place-items-center">
                <!-- Logout Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"
                    class="w-6 h-6">
                    <path fill-rule="evenodd"
                        d="M12 2.25a.75.75 0 01.75.75v9a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM6.166 5.106a.75.75 0 010 1.06 8.25 8.25 0 1011.668 0 .75.75 0 111.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 011.06 0z"
                        clip-rule="evenodd"></path>
                </svg>
            </div>
            Logout
        </a>
    </div>
</div>


<script>

    function updateActiveMenuItem() {
        const currentPath = window.location.pathname;
        const menuItems = document.querySelectorAll('.menu-item-link');
        menuItems.forEach((item) => {
            const menuItemPath = item.getAttribute('hx-get');
            const normalizedMenuItemPath = menuItemPath === '/' ? '/app/main' : menuItemPath;

            item.classList.remove('active'); // Remove active class from all items
            if (normalizedMenuItemPath === currentPath) {
                item.classList.add('active'); // Add 'active' class to highlight the item
            }
        });
    }
    // Initial update on page load
    document.addEventListener('DOMContentLoaded', updateActiveMenuItem);

    // Update on HTMX history events
    document.body.addEventListener('htmx:pushedIntoHistory', updateActiveMenuItem);
    document.body.addEventListener('htmx:poppedFromHistory', updateActiveMenuItem);


</script>